# บทนำ

> หมายเหตุ: หนังสือฉบับนี้มีเนื้อหาเดียวกันกับฉบับพิมพ์และอีบุ๊ก [The Rust Programming
> Language][nsprust] ที่จัดจำหน่ายโดย [No Starch
> Press][nsp].

[nsprust]: https://nostarch.com/rust-programming-language-2nd-edition
[nsp]: https://nostarch.com/

ขอต้อนรับสู่ _The Rust Programming Language_, หนังสือปูพื้นฐานสำหรับการเขียนโปรแกรมด้วยภาษา Rust
Rust เป็นภาษาโปรแกรมที่ช่วยให้คุณเขียนซอฟต์แวร์ได้รวดเร็วและเชื่อถือได้มากขึ้น โดยทั่วไปแล้ว การออกแบบภาษาที่ใช้งานง่ายในระดับสูง (high-level ergonomics) กับการควบคุมรายละเอียดในระดับต่ำ (low-level control) มักจะขัดแย้งกัน แต่ Rust ท้าทายแนวคิดนั้น Rust ให้คุณได้ทั้งพลังในการจัดการเชิงเทคนิคอย่างลึกซึ้ง และประสบการณ์การพัฒนาที่ดีในเวลาเดียวกัน คุณจึงสามารถควบคุมสิ่งต่างๆ อย่างหน่วยความจำได้อย่างละเอียด โดยไม่ต้องเผชิญกับความยุ่งยากเหมือนภาษาระดับต่ำแบบดั้งเดิม

## Rust เหมาะกับใคร

Rust เป็นภาษาที่เหมาะกับคนหลากหลายกลุ่ม ด้วยเหตุผลที่แตกต่างกัน ลองมาดูกันว่ามีกลุ่มไหนที่ได้รับประโยชน์มากที่สุดบ้าง

### ทีมพัฒนาซอฟต์แวร์

Rust กำลังพิสูจน์ตัวเองว่าเป็นเครื่องมือที่มีประสิทธิภาพสำหรับการทำงานร่วมกันในทีมขนาดใหญ่ ซึ่งอาจมีสมาชิกที่มีพื้นฐานด้านการเขียนโปรแกรมระดับระบบไม่เท่ากัน 
โค้ดระดับต่ำ (low-level code) มักเต็มไปด้วยบั๊กยากๆ ที่มองไม่เห็น ซึ่งในภาษาอื่นๆ มักต้องอาศัยการทดสอบจำนวนมากหรือการรีวิวโค้ดอย่างละเอียดจากนักพัฒนาที่มีประสบการณ์เท่านั้นจึงจะเจอ แต่ใน Rust คอมไพเลอร์จะทำหน้าที่เป็น “ด่านตรวจ” ที่ไม่ยอมให้โค้ดที่มีที่มองไม่เห็นเหล่านี้ (รวมถึงบั๊กที่เกี่ยวกับการทำงานพร้อมกันหรือ concurrency bugs) ผ่านไปได้ง่ายๆ
ด้วยการทำงานร่วมกับคอมไพเลอร์ ทีมสามารถโฟกัสที่ตรรกะของโปรแกรมได้มากขึ้น แทนที่จะเสียเวลาไล่ล่าบั๊กจุกจิก

นอกจากนี้ Rust ยังนำเครื่องมือทันสมัยมาใช้ในโลกของระบบโปรแกรมมิ่งอีกด้วย เช่น:

- Cargo, ครื่องมือจัดการ dependencies และ build tool ที่รวมมาให้ในตัว ทำให้การติดตั้ง คอมไพล์ และจัดการไลบรารีเป็นเรื่องง่ายและเป็นมาตรฐานเดียวกันทั้งระบบนิเวศของ Rust
- The Rustfmt เครื่องมือจัดรูปแบบโค้ดให้อัตโนมัติ เพื่อให้โค้ดของนักพัฒนาทุกคนมีสไตล์เดียวกัน
- The rust-analyzer เครื่องมือเบื้องหลังที่ช่วยให้ IDE แสดงข้อความแนะนำ เติมโค้ด และรายงานข้อผิดพลาดแบบเรียลไทม์

ด้วยเครื่องมือเหล่านี้และอีกมากมายในระบบนิเวศของ Rust  นักพัฒนาจึงสามารถเขียนโค้ดระดับระบบได้อย่างมีประสิทธิภาพ โดยไม่ต้องแลกกับประสบการณ์การทำงานที่ดี

### นักเรียน/นักศึกษา

Rust เหมาะสำหรับนักเรียนนักศึกษาและผู้ที่สนใจเรียนรู้เกี่ยวกับแนวคิดเชิงระบบ หลายคนได้เรียนรู้หัวข้อต่างๆ เช่น การพัฒนาระบบปฏิบัติการผ่านการใช้ Rust ชุมชน Rust เปิดกว้างและยินดีตอบคำถามของนักเรียนนักศึกษาเป็นอย่างยิ่ง ด้วยความพยายามต่างๆ เช่น หนังสือเล่มนี้ ทีมงาน Rust ต้องการทำให้แนวคิดเชิงระบบเข้าถึงผู้คนได้มากขึ้น โดยเฉพาะผู้ที่เพิ่งเริ่มต้นเขียนโปรแกรม

### บริษัทต่างๆ

บริษัทใหญ่น้อยหลายร้อยแห่งนำ Rust ไปใช้จริงในการผลิตสำหรับงานที่หลากหลาย รวมถึงเครื่องมือบรรทัดคำสั่ง, บริการเว็บ, เครื่องมือ DevOps, อุปกรณ์ฝังตัว, การวิเคราะห์และแปลงรหัสสัญญาณเสียงและวิดีโอ, สกุลเงินดิจิทัล, ชีวสารสนเทศ, เครื่องมือค้นหา, แอปพลิเคชัน Internet of Things, การเรียนรู้ของเครื่อง และแม้แต่ส่วนสำคัญของเว็บเบราว์เซอร์ Firefox

### นักพัฒนาโอเพนซอร์ส

Rust เหมาะสำหรับผู้ที่ต้องการสร้างภาษาโปรแกรม Rust, ชุมชน, เครื่องมือสำหรับนักพัฒนา และไลบรารี พวกเรายินดีเป็นอย่างยิ่งหากคุณจะร่วมมีส่วนร่วมในการพัฒนาภาษา Rust

### ผู้ที่ให้ความสำคัญกับความเร็วและความเสถียร

Rust เหมาะสำหรับผู้ที่ปรารถนาความเร็วและความเสถียรในภาษาโปรแกรม ความเร็วในที่นี้หมายถึงทั้งความรวดเร็วในการรันโค้ด Rust และความเร็วที่ Rust ช่วยให้คุณเขียนโปรแกรมได้ การตรวจสอบของคอมไพเลอร์ Rust ช่วยให้มั่นใจถึงเสถียรภาพผ่านการเพิ่มคุณสมบัติใหม่และการปรับโครงสร้างโค้ด ซึ่งแตกต่างจากโค้ดเก่าที่เปราะบางในภาษาที่ไม่มีการตรวจสอบเหล่านี้ ซึ่งนักพัฒนามักจะหวาดกลัวที่จะแก้ไข ด้วยความมุ่งมั่นที่จะสร้างนามธรรมที่ไม่เสียค่าใช้จ่าย (zero-cost abstractions) ซึ่งเป็นคุณสมบัติระดับสูงที่คอมไพล์เป็นโค้ดระดับต่ำได้อย่างรวดเร็วเทียบเท่ากับการเขียนโค้ดด้วยตนเอง Rust มุ่งมั่นที่จะทำให้โค้ดที่ปลอดภัยเป็นโค้ดที่รวดเร็วด้วยเช่นกัน

ภาษา Rust หวังที่จะสนับสนุนผู้ใช้อื่นๆ อีกมากมายเช่นกัน ผู้ที่กล่าวถึงมานี้เป็นเพียงผู้มีส่วนได้ส่วนเสียรายใหญ่บางส่วนเท่านั้น โดยรวมแล้ว ความปรารถนาสูงสุดของ Rust คือการขจัดข้อแลกเปลี่ยนที่โปรแกรมเมอร์ยอมรับมานานหลายทศวรรษ โดยมอบทั้งความปลอดภัย และ ผลผลิต, ความเร็ว และ ความสะดวกในการใช้งาน ลองใช้ Rust ดู แล้วคุณจะรู้ว่าตัวเลือกของมันเหมาะกับคุณหรือไม่

## หนังสือเล่มนี้เหมาะสำหรับใคร

หนังสือเล่มนี้ตั้งสมมติฐานว่าคุณเคยเขียนโค้ดด้วยภาษาโปรแกรมอื่นมาแล้ว แต่ไม่ได้เจาะจงว่าเป็นภาษาใด เราพยายามทำให้เนื้อหาสามารถเข้าถึงได้ในวงกว้างสำหรับผู้ที่มีพื้นฐานการเขียนโปรแกรมที่หลากหลาย เราไม่ได้ใช้เวลามากนักในการพูดถึงว่าการเขียนโปรแกรม คืออะไร หรือวิธีการคิดเกี่ยวกับการเขียนโปรแกรม หากคุณยังใหม่กับการเขียนโปรแกรมโดยสิ้นเชิง คุณอาจจะได้รับประโยชน์มากกว่าจากการอ่านหนังสือที่แนะนำการเขียนโปรแกรมโดยเฉพาะ

## วิธีการใช้งานหนังสือเล่มนี้

โดยทั่วไปแล้ว หนังสือเล่มนี้ตั้งใจให้คุณอ่านตามลำดับตั้งแต่หน้าแรกไปจนถึงหน้าสุดท้าย บทต่อๆ ไปจะสร้างขึ้นจากแนวคิดในบทก่อนหน้า และบทก่อนหน้าอาจจะยังไม่ลงรายละเอียดในหัวข้อใดหัวข้อหนึ่ง แต่จะกลับมากล่าวถึงหัวข้อนั้นอีกครั้งในบทต่อๆ ไป

คุณจะพบกับบทเรียนสองประเภทในหนังสือเล่มนี้: บทเรียนแนวคิด และบทเรียนโครงงาน ในบทเรียนแนวคิด คุณจะได้เรียนรู้เกี่ยวกับแง่มุมต่างๆ ของ Rust ในบทเรียนโครงงาน เราจะสร้างโปรแกรมขนาดเล็กไปพร้อมๆ กัน โดยนำสิ่งที่คุณได้เรียนรู้มาประยุกต์ใช้ บทที่ 2, 12 และ 21 เป็นบทเรียนโครงงาน ส่วนบทอื่นๆ เป็นบทเรียนแนวคิด

บทที่ 1 อธิบายวิธีการติดตั้ง Rust, วิธีการเขียนโปรแกรม "Hello, world!", และวิธีการใช้งาน Cargo ซึ่งเป็นเครื่องมือจัดการแพ็กเกจและเครื่องมือสร้างของ Rust บทที่ 2 เป็นบทนำเชิงปฏิบัติในการเขียนโปรแกรมใน Rust โดยจะให้คุณสร้างเกมทายตัวเลข ในบทนี้เราจะกล่าวถึงแนวคิดในภาพรวม และบทต่อๆ ไปจะให้รายละเอียดเพิ่มเติม หากคุณต้องการลงมือปฏิบัติจริงทันที บทที่ 2 คือที่สำหรับคุณ บทที่ 3 ครอบคลุมคุณสมบัติของ Rust ที่คล้ายคลึงกับภาษาโปรแกรมอื่นๆ และในบทที่ 4 คุณจะได้เรียนรู้เกี่ยวกับระบบความเป็นเจ้าของ (ownership system) ของ Rust หากคุณเป็นผู้เรียนที่พิถีพิถันเป็นพิเศษและต้องการเรียนรู้ทุกรายละเอียดก่อนที่จะไปยังหัวข้อถัดไป คุณอาจต้องการข้ามบทที่ 2 ไปยังบทที่ 3 โดยตรง และกลับมาที่บทที่ 2 เมื่อคุณต้องการทำงานในโครงงานเพื่อนำรายละเอียดที่คุณได้เรียนรู้ไปประยุกต์ใช้

บทที่ 5 กล่าวถึงโครงสร้าง (structs) และเมธอด (methods) และบทที่ 6 ครอบคลุมการแจงนับ (enums), นิพจน์ match, และโครงสร้างควบคุมการไหล if let คุณจะได้ใช้โครงสร้างและการแจงนับเพื่อสร้างชนิดข้อมูลที่คุณกำหนดเองใน Rust

ในบทที่ 7 คุณจะได้เรียนรู้เกี่ยวกับระบบโมดูลของ Rust และกฎความเป็นส่วนตัวสำหรับการจัดระเบียบโค้ดและ Application Programming Interface (API) สาธารณะของโค้ดนั้น บทที่ 8 กล่าวถึงโครงสร้างข้อมูลคอลเล็กชันทั่วไปบางส่วนที่ไลบรารีมาตรฐานมีให้ เช่น เวกเตอร์, สตริง และแฮชแมป บทที่ 9 สำรวจปรัชญาและเทคนิคการจัดการข้อผิดพลาดของ Rust

บทที่ 10 เจาะลึกเรื่อง Generics, Traits และ Lifetimes ซึ่งมอบพลังให้คุณกำหนดโค้ดที่สามารถใช้งานได้กับหลายชนิดข้อมูล บทที่ 11 กล่าวถึงการทดสอบ ซึ่งแม้ว่า Rust จะมีการรับประกันความปลอดภัยแล้วก็ตาม การทดสอบก็ยังจำเป็นเพื่อให้แน่ใจว่าตรรกะของโปรแกรมคุณถูกต้อง ในบทที่ 12 เราจะสร้างการใช้งานฟังก์ชันการทำงานที่เป็นส่วนหนึ่งของเครื่องมือบรรทัดคำสั่ง grep ซึ่งใช้สำหรับค้นหาข้อความภายในไฟล์ สำหรับบทนี้ เราจะใช้แนวคิดหลายอย่างที่เราได้กล่าวถึงในบทก่อนหน้า

บทที่ 13 สำรวจ Closures และ Iterators ซึ่งเป็นคุณสมบัติของ Rust ที่มาจากภาษาโปรแกรมเชิงฟังก์ชัน ในบทที่ 14 เราจะพิจารณา Cargo ในรายละเอียดมากขึ้น และพูดถึงแนวทางปฏิบัติที่ดีที่สุดสำหรับการแบ่งปันไลบรารีของคุณกับผู้อื่น บทที่ 15 กล่าวถึง Smart Pointers ที่ไลบรารีมาตรฐานมีให้ และ Traits ที่ทำให้ฟังก์ชันการทำงานของ Smart Pointers เป็นไปได้

ในบทที่ 16 เราจะพิจารณารูปแบบต่างๆ ของการเขียนโปรแกรมแบบขนาน และพูดคุยถึงวิธีที่ Rust ช่วยให้คุณเขียนโปรแกรมที่มีหลายเธรดได้อย่างไร้กังวล ในบทที่ 17 เราจะต่อยอดจากนั้นโดยการสำรวจไวยากรณ์ async และ await ของ Rust และรูปแบบการทำงานพร้อมกันแบบ Lightweight ที่ไวยากรณ์เหล่านี้สนับสนุน

บทที่ 18 จะพิจารณาว่าสำนวนภาษา Rust เปรียบเทียบกับหลักการเขียนโปรแกรมเชิงวัตถุที่คุณอาจคุ้นเคยได้อย่างไร

บทที่ 19 เป็นบทอ้างอิงเกี่ยวกับ Patterns และ Pattern Matching ซึ่งเป็นวิธีที่มีประสิทธิภาพในการแสดงแนวคิดต่างๆ ทั่วทั้งโปรแกรม Rust บทที่ 20 รวบรวมหัวข้อขั้นสูงที่น่าสนใจมากมาย รวมถึง Unsafe Rust, Macros และรายละเอียดเพิ่มเติมเกี่ยวกับ Lifetimes, Traits, Types, Functions และ Closures

ในบทที่ 21 เราจะทำโครงงานให้เสร็จสิ้น โดยเราจะสร้างเว็บเซิร์ฟเวอร์แบบ Multithreaded ระดับล่าง!

สุดท้ายนี้ ภาคผนวกบางส่วนมีข้อมูลที่เป็นประโยชน์เกี่ยวกับภาษาในรูปแบบที่อ้างอิงได้มากขึ้น ภาคผนวก A ครอบคลุมคำหลัก (keywords) ของ Rust, ภาคผนวก B ครอบคลุมตัวดำเนินการ (operators) และสัญลักษณ์ (symbols) ของ Rust, ภาคผนวก C ครอบคลุม Traits ที่สามารถ Derive ได้ซึ่งมีอยู่ในไลบรารีมาตรฐาน, ภาคผนวก D ครอบคลุมเครื่องมือพัฒนาที่เป็นประโยชน์บางส่วน และภาคผนวก E อธิบายเกี่ยวกับ Rust Editions ในภาคผนวก F คุณสามารถค้นหาคำแปลของหนังสือเล่มนี้ได้ และในภาคผนวก G เราจะกล่าวถึงวิธีการสร้าง Rust และ Nightly Rust คืออะไร

ไม่มีวิธีที่ผิดในการอ่านหนังสือเล่มนี้: หากคุณต้องการข้ามไปข้างหน้า ก็ทำได้เลย! คุณอาจจะต้องย้อนกลับไปอ่านบทก่อนหน้าหากเกิดความสับสน แต่ขอให้ทำในวิธีที่เหมาะกับคุณที่สุดครับ

<span id="ferris"></span>

ส่วนสำคัญของกระบวนการเรียนรู้ Rust คือการเรียนรู้วิธีอ่านข้อความแสดงข้อผิดพลาดที่คอมไพเลอร์แสดง: สิ่งเหล่านี้จะนำทางคุณไปสู่โค้ดที่ทำงานได้ ดังนั้น เราจะยกตัวอย่างมากมายที่ไม่สามารถคอมไพล์ได้ พร้อมกับข้อความแสดงข้อผิดพลาดที่คอมไพเลอร์จะแสดงให้คุณเห็นในแต่ละสถานการณ์ โปรดทราบว่าหากคุณป้อนและรันตัวอย่างแบบสุ่ม ตัวอย่างนั้นอาจจะไม่สามารถคอมไพล์ได้! โปรดอ่านข้อความโดยรอบเพื่อให้แน่ใจว่าตัวอย่างที่คุณกำลังพยายามรันนั้นตั้งใจให้เกิดข้อผิดพลาดหรือไม่ Ferris จะช่วยคุณแยกแยะโค้ดที่ไม่ได้ตั้งใจให้ทำงานได้ด้วย:

| Ferris                                                                                                           | Meaning                                          |
| ---------------------------------------------------------------------------------------------------------------- | ------------------------------------------------ |
| <img src="img/ferris/does_not_compile.svg" class="ferris-explain" alt="Ferris with a question mark"/>            | This code does not compile!                      |
| <img src="img/ferris/panics.svg" class="ferris-explain" alt="Ferris throwing up their hands"/>                   | This code panics!                                |
| <img src="img/ferris/not_desired_behavior.svg" class="ferris-explain" alt="Ferris with one claw up, shrugging"/> | This code does not produce the desired behavior. |

ในสถานการณ์ส่วนใหญ่ เราจะนำคุณไปยังโค้ดเวอร์ชันที่ถูกต้องของโค้ดที่ไม่สามารถคอมไพล์ได้

## Source Code

ไฟล์ต้นฉบับที่ใช้สร้างหนังสือเล่มนี้สามารถหาอ่านได้บน
[GitHub][book].

[book]: https://github.com/rust-lang/book/tree/main/src
